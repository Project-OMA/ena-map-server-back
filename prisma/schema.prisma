generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "rhel-openssl-1.0.x"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model tb_user {
  id    BigInt       @id @default(autoincrement())
  name    String       @db.VarChar(255)
  email         String       @db.VarChar(255)
  password      String       @db.VarChar(255)
  type          BigInt       
  created_at    DateTime     @default(now())
  updated_at    DateTime     @updatedAt
  group         tb_group?
  rel_user_map rel_user_map[]
  rel_owner_map   rel_owner_map[]
  rel_owner_user rel_owner_user[]
  rel_owner_group rel_owner_group[]
  rel_user_group rel_user_group[]
}

model rel_owner_user {
  id  BigInt
  tag    Json
  user   tb_user @relation(fields: [id], references: [id])

  @@id([id])
  @@index([id], map: "rel_owner_user_id_user_fkey")
}


model rel_owner_group {
  id_user BigInt
  id_group BigInt
  tag    Json
  user   tb_user @relation(fields: [id_user], references: [id])
  group   tb_group @relation(fields: [id_group], references: [id])

  @@id([id_user, id_group])
  @@index([id_user], map: "rel_owner_group_id_user_fkey")
  @@index([id_group], map: "rel_owner_group_id_group_fkey")
}

model rel_user_group {
  id_user BigInt
  id_group BigInt
  tag    Json
  user tb_user @relation(fields: [id_user], references: [id])
  group   tb_group @relation(fields: [id_group], references: [id])

  @@id([id_user, id_group])
  @@index([id_user], map: "rel_user_group_id_user_fkey")
  @@index([id_group], map: "rel_user_group_id_group_fkey")
}


model tb_group {
  id     BigInt       @id @default(autoincrement())
  name      String       @db.VarChar(255)
  id_owner      BigInt       @unique
  created_at    DateTime     @default(now())
  updated_at    DateTime     @updatedAt
  owner         tb_user   @relation(fields: [id_owner], references: [id])
  rel_owner_group rel_owner_group[]
  rel_user_group rel_user_group[]
}

model rel_user_map {
  id_user BigInt
  id_map    BigInt
  order     Json
  user   tb_user @relation(fields: [id_user], references: [id])
  map      tb_map @relation(fields: [id_map], references: [id])

  @@id([id_user, id_map])
  @@index([id_user], map: "rel_user_map_id_user_fkey")
  @@index([id_map], map: "rel_user_map_id_map_fkey")
}

model rel_owner_map {
  id_user BigInt
  id_map    BigInt
  tag     Json
  user   tb_user @relation(fields: [id_user], references: [id])
  map      tb_map @relation(fields: [id_map], references: [id])

  @@id([id_user, id_map])
  @@index([id_user], map: "rel_owner_map_id_user_fkey")
  @@index([id_map], map: "rel_owner_map_id_map_fkey")
}

model tb_map {
  id       BigInt       @id @default(autoincrement())
  name        String       @db.VarChar(255)
  thumb_url     String     @db.VarChar(255)
  url       String       @db.VarChar(255)
  created_at    DateTime     @default(now())
  updated_at    DateTime     @updatedAt
  rel_user_map rel_user_map[]
  rel_owner_map   rel_owner_map[]
}